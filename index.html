<!DOCTYPE html>

<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FinanciÃ«n â€” Rob Borghouts</title>
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="FinanciÃ«n RB">
<meta name="application-name" content="FinanciÃ«n RB">
<meta name="theme-color" content="#1a1714">
<meta name="msapplication-TileColor" content="#1a1714">
<link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cdefs%3E%3ClinearGradient id='bg2' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%231a1714'/%3E%3Cstop offset='1' stop-color='%232e2825'/%3E%3C/linearGradient%3E%3ClinearGradient id='stripe2' x1='0' y1='0' x2='1' y2='0'%3E%3Cstop offset='0' stop-color='%23c9602a'/%3E%3Cstop offset='0.4' stop-color='%23e8a060'/%3E%3Cstop offset='0.65' stop-color='%232a7a4f'/%3E%3Cstop offset='1' stop-color='%232a5b8a'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='512' height='512' rx='112' fill='url(%23bg2)'/%3E%3Crect x='0' y='0' width='512' height='28' rx='14' fill='url(%23stripe2)'/%3E%3Ccircle cx='256' cy='290' r='140' fill='none' stroke='%23c9602a' stroke-width='12' opacity='0.5'/%3E%3Ccircle cx='256' cy='290' r='100' fill='none' stroke='%23c9602a' stroke-width='5' opacity='0.2'/%3E%3Ccircle cx='256' cy='290' r='60' fill='%23c9602a' opacity='0.08'/%3E%3Ctext x='256' y='335' font-family='Georgia,serif' font-size='120' font-weight='bold' fill='%23c9602a' text-anchor='middle' letter-spacing='-4'%3ERB%3C/text%3E%3Ctext x='256' y='110' font-family='Georgia,serif' font-size='42' fill='%236b6560' text-anchor='middle' letter-spacing='16'%3EFINANCI%C3%8BN%3C/text%3E%3C/svg%3E">
<link rel="manifest" href="data:application/manifest+json,%7B%22name%22%3A%22Financi%C3%ABn%20Rob%20Borghouts%22%2C%22short_name%22%3A%22Financi%C3%ABn%20RB%22%2C%22description%22%3A%22Persoonlijk%20financi%C3%ABl%20overzicht%22%2C%22start_url%22%3A%22.%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%231a1714%22%2C%22theme_color%22%3A%22%231a1714%22%2C%22orientation%22%3A%22portrait%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage%2Fsvg%2Bxml%2C%253Csvg%2520xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%2520viewBox%3D'0%25200%2520512%2520512'%253E%253Crect%2520width%3D'512'%2520height%3D'512'%2520rx%3D'112'%2520fill%3D'%25231a1714'%2F%253E%253Ctext%2520x%3D'256'%2520y%3D'340'%2520font-family%3D'Georgia'%2520font-size%3D'120'%2520fill%3D'%2523c9602a'%2520text-anchor%3D'middle'%253ERB%253C%2Ftext%253E%253C%2Fsvg%253E%22%2C%22sizes%22%3A%22512x512%22%2C%22type%22%3A%22image%2Fsvg%2Bxml%22%2C%22purpose%22%3A%22any%20maskable%22%7D%5D%7D">
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%231a1714'/%3E%3Cstop offset='1' stop-color='%232e2825'/%3E%3C/linearGradient%3E%3ClinearGradient id='stripe' x1='0' y1='0' x2='1' y2='0'%3E%3Cstop offset='0' stop-color='%23c9602a'/%3E%3Cstop offset='0.4' stop-color='%23e8a060'/%3E%3Cstop offset='0.65' stop-color='%232a7a4f'/%3E%3Cstop offset='1' stop-color='%232a5b8a'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='22' fill='url(%23bg)'/%3E%3Crect x='0' y='0' width='100' height='5' rx='3' fill='url(%23stripe)'/%3E%3Ccircle cx='50' cy='54' r='28' fill='none' stroke='%23c9602a' stroke-width='2.5' opacity='0.5'/%3E%3Ccircle cx='50' cy='54' r='21' fill='none' stroke='%23c9602a' stroke-width='1' opacity='0.25'/%3E%3Ctext x='50' y='62' font-family='Georgia,serif' font-size='22' font-weight='bold' fill='%23c9602a' text-anchor='middle' letter-spacing='-1'%3ERB%3C/text%3E%3Ctext x='50' y='22' font-family='Georgia,serif' font-size='9' fill='%236b6560' text-anchor='middle' letter-spacing='3'%3EFINANCI%C3%8BN%3C/text%3E%3C/svg%3E">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Space+Grotesk:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
â€“bg: #faf8f4;
â€“surface: #ffffff;
â€“card: #f5f2ed;
â€“border: #e8e2d9;
â€“ink: #1a1714;
â€“ink2: #4a4540;
â€“muted: #9a9088;
â€“accent: #c9602a;
â€“accent-light: #f5ebe3;
â€“green: #2a7a4f;
â€“green-light: #e3f4ec;
â€“blue: #2a5b8a;
â€“blue-light: #e3ecf5;
â€“red: #c9302a;
â€“red-light: #fdecea;
â€“shadow: 0 2px 20px rgba(26,23,20,0.07);
â€“shadow-lg: 0 8px 40px rgba(26,23,20,0.12);
}

body {
font-family: â€˜Space Groteskâ€™, sans-serif;
background: var(â€“bg);
color: var(â€“ink);
min-height: 100vh;
overflow-x: hidden;
}

.top-stripe {
height: 5px;
background: linear-gradient(90deg, #c9602a 0%, #e8a060 30%, #2a7a4f 60%, #2a5b8a 100%);
}

/* â”€â”€ SIDEBAR LAYOUT â”€â”€ */
.layout {
display: grid;
grid-template-columns: 260px 1fr;
min-height: calc(100vh - 5px);
}

/* Sidebar */
.sidebar {
background: var(â€“ink);
color: #faf8f4;
padding: 2.5rem 1.8rem;
display: flex;
flex-direction: column;
gap: 0;
position: sticky;
top: 0;
height: calc(100vh - 5px);
overflow-y: auto;
}

.sidebar-logo {
display: flex;
align-items: center;
gap: 0.8rem;
margin-bottom: 2.5rem;
}

.logo-icon {
width: 44px;
height: 44px;
background: var(â€“accent);
border-radius: 12px;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.3rem;
flex-shrink: 0;
}

.logo-text {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 1.3rem;
font-weight: 400;
line-height: 1.1;
}

.logo-text small {
display: block;
font-family: â€˜Space Groteskâ€™, sans-serif;
font-size: 0.58rem;
text-transform: uppercase;
letter-spacing: 0.14em;
color: #6b6560;
font-weight: 500;
margin-top: 1px;
}

.sidebar-nav {
display: flex;
flex-direction: column;
gap: 0.3rem;
margin-bottom: 2rem;
}

.nav-label {
font-size: 0.58rem;
text-transform: uppercase;
letter-spacing: 0.14em;
color: #4a4540;
font-weight: 600;
padding: 0.3rem 0.5rem;
margin-bottom: 0.2rem;
margin-top: 0.5rem;
}

.nav-item {
display: flex;
align-items: center;
gap: 0.7rem;
padding: 0.65rem 0.8rem;
border-radius: 10px;
cursor: pointer;
font-size: 0.82rem;
font-weight: 500;
color: #9a9088;
transition: all 0.18s;
border: none;
background: none;
text-align: left;
width: 100%;
}

.nav-item:hover { background: rgba(255,255,255,0.07); color: #faf8f4; }
.nav-item.active { background: rgba(201,96,42,0.18); color: var(â€“accent); }
.nav-item .nav-icon { font-size: 1rem; flex-shrink: 0; }

/* Sidebar balance block */
.sidebar-balance {
background: rgba(255,255,255,0.05);
border-radius: 14px;
padding: 1.2rem;
margin-top: auto;
border: 1px solid rgba(255,255,255,0.07);
}

.sidebar-balance .bal-label {
font-size: 0.6rem;
text-transform: uppercase;
letter-spacing: 0.12em;
color: #6b6560;
font-weight: 500;
margin-bottom: 0.4rem;
}

.sidebar-balance .bal-amount {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 1.8rem;
font-weight: 300;
line-height: 1;
color: #faf8f4;
}

.sidebar-balance .bal-amount.positive { color: #5dba88; }
.sidebar-balance .bal-amount.negative { color: #e85050; }

.sidebar-balance .bal-sub {
font-size: 0.62rem;
color: #4a4540;
margin-top: 0.35rem;
}

.made-by-sidebar {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 0.8rem;
font-style: italic;
color: #3a3530;
margin-top: 1.2rem;
text-align: center;
}

.made-by-sidebar strong { color: #6b6560; font-style: normal; }

.install-btn {
width: 100%;
background: var(â€“accent);
color: #faf8f4;
border: none;
border-radius: 10px;
font-family: â€˜Space Groteskâ€™, sans-serif;
font-size: 0.75rem;
font-weight: 600;
padding: 0.65rem 1rem;
cursor: pointer;
letter-spacing: 0.05em;
margin-top: 0.8rem;
transition: opacity 0.2s;
text-align: center;
}

.install-btn:hover { opacity: 0.85; }

/* â”€â”€ MAIN CONTENT â”€â”€ */
.main {
padding: 2.5rem 2.5rem 5rem;
overflow-y: auto;
}

/* Page sections */
.page-section { display: none; }
.page-section.active { display: block; }

/* Page header */
.page-header {
margin-bottom: 2.5rem;
border-bottom: 1px solid var(â€“border);
padding-bottom: 1.5rem;
}

.page-header h2 {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: clamp(2rem, 4vw, 3rem);
font-weight: 300;
letter-spacing: -0.02em;
line-height: 1;
}

.page-header h2 em { font-style: italic; color: var(â€“accent); }

.page-header .page-date {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 0.9rem;
color: var(â€“muted);
font-style: italic;
margin-top: 0.4rem;
}

/* Summary grid */
.summary {
display: grid;
grid-template-columns: repeat(4, 1fr);
gap: 1rem;
margin-bottom: 2rem;
animation: riseUp 0.6s ease both;
}

.summary-card {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: 14px;
padding: 1.3rem;
box-shadow: var(â€“shadow);
position: relative;
overflow: hidden;
transition: transform 0.2s, box-shadow 0.2s;
}

.summary-card:hover { transform: translateY(-2px); box-shadow: var(â€“shadow-lg); }

.summary-card::after {
content: â€˜â€™;
position: absolute;
top: 0; left: 0; right: 0;
height: 3px;
border-radius: 14px 14px 0 0;
}

.summary-card.sc-income::after  { background: var(â€“green); }
.summary-card.sc-expense::after { background: var(â€“accent); }
.summary-card.sc-balance::after { background: var(â€“blue); }
.summary-card.sc-avg::after     { background: #9a6faf; }

.sc-label {
font-size: 0.62rem;
text-transform: uppercase;
letter-spacing: 0.12em;
color: var(â€“muted);
font-weight: 500;
margin-bottom: 0.5rem;
}

.sc-num {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 1.7rem;
font-weight: 300;
line-height: 1;
}

.summary-card.sc-income  .sc-num { color: var(â€“green); }
.summary-card.sc-expense .sc-num { color: var(â€“accent); }
.summary-card.sc-balance .sc-num { color: var(â€“blue); }
.summary-card.sc-avg     .sc-num { color: #9a6faf; }
.sc-num.negative { color: var(â€“red) !important; }

.sc-sub {
font-size: 0.62rem;
color: var(â€“muted);
margin-top: 0.35rem;
}

/* Budget */
.budget-card {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: 14px;
padding: 1.3rem 1.5rem;
margin-bottom: 1.5rem;
box-shadow: var(â€“shadow);
animation: riseUp 0.6s 0.07s ease both;
}

.budget-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 0.9rem;
}

.budget-header .b-label {
font-size: 0.65rem;
text-transform: uppercase;
letter-spacing: 0.12em;
color: var(â€“muted);
font-weight: 500;
}

.budget-header .b-right {
display: flex;
align-items: center;
gap: 0.4rem;
font-size: 0.72rem;
color: var(â€“muted);
}

.b-input {
width: 85px;
background: var(â€“card);
border: 1px solid var(â€“border);
border-radius: 7px;
color: var(â€“ink);
font-family: â€˜Space Groteskâ€™, sans-serif;
font-size: 0.8rem;
padding: 0.32rem 0.55rem;
outline: none;
transition: border-color 0.2s;
text-align: right;
}

.b-input:focus { border-color: var(â€“accent); }

.budget-track {
background: var(â€“card);
border-radius: 99px;
height: 8px;
overflow: hidden;
}

.budget-fill {
height: 100%;
border-radius: 99px;
background: linear-gradient(90deg, var(â€“green), #5dba88);
transition: width 0.7s cubic-bezier(.16,1,.3,1), background 0.4s;
min-width: 0;
}

.budget-fill.warn { background: linear-gradient(90deg, #c9862a, #e8b060); }
.budget-fill.over { background: linear-gradient(90deg, var(â€“red), #e85050); }

.budget-labels {
display: flex;
justify-content: space-between;
margin-top: 0.45rem;
font-size: 0.67rem;
color: var(â€“muted);
}

/* Chart */
.chart-card {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: 14px;
padding: 1.5rem;
margin-bottom: 1.5rem;
box-shadow: var(â€“shadow);
animation: riseUp 0.6s 0.12s ease both;
}

.chart-card .chart-title {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 1.3rem;
margin-bottom: 1.2rem;
}

.chart-card .chart-title em { font-style: italic; color: var(â€“accent); }

.chart-bars {
display: flex;
align-items: flex-end;
gap: 0.5rem;
height: 110px;
}

.chart-col {
flex: 1;
display: flex;
flex-direction: column;
align-items: center;
gap: 0.3rem;
height: 100%;
justify-content: flex-end;
}

.chart-bar-pair {
width: 100%;
display: flex;
gap: 2px;
align-items: flex-end;
}

.bar {
flex: 1;
border-radius: 5px 5px 0 0;
min-height: 3px;
transition: height 0.7s cubic-bezier(.16,1,.3,1);
cursor: default;
}

.bar.inc { background: var(â€“green-light); border: 1px solid #b0d8be; }
.bar.inc:hover { background: var(â€“green); }
.bar.exp { background: var(â€“accent-light); border: 1px solid #e8c4ae; }
.bar.exp:hover { background: var(â€“accent); }

.chart-lbl {
font-size: 0.58rem;
color: var(â€“muted);
text-transform: uppercase;
letter-spacing: 0.04em;
white-space: nowrap;
}

.chart-legend {
display: flex;
gap: 1rem;
margin-top: 0.8rem;
font-size: 0.65rem;
color: var(â€“muted);
}

.legend-dot {
width: 9px; height: 9px;
border-radius: 50%;
display: inline-block;
margin-right: 0.3rem;
vertical-align: middle;
}

/* Tip */
.tip-box {
background: linear-gradient(135deg, #f5ebe3 0%, #faf3ee 100%);
border: 1px solid #e8d0c4;
border-left: 3px solid var(â€“accent);
border-radius: 12px;
padding: 0.9rem 1.2rem;
margin-bottom: 1.5rem;
font-size: 0.78rem;
color: var(â€“ink2);
animation: riseUp 0.6s 0.17s ease both;
display: flex;
gap: 0.7rem;
align-items: flex-start;
line-height: 1.55;
}

.tip-box em { font-style: italic; font-weight: 500; color: var(â€“accent); }

/* Form card */
.form-card {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: 16px;
padding: 1.8rem;
margin-bottom: 1.5rem;
box-shadow: var(â€“shadow);
animation: riseUp 0.6s 0.2s ease both;
}

.form-card .form-title {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 1.35rem;
font-weight: 400;
margin-bottom: 1.2rem;
}

.form-card .form-title em { font-style: italic; color: var(â€“accent); }
.form-card .form-title.income-title em { color: var(â€“green); }

/* Tab toggle */
.type-toggle {
display: flex;
gap: 0.5rem;
margin-bottom: 1.2rem;
}

.type-btn {
flex: 1;
padding: 0.6rem;
border-radius: 10px;
border: 1.5px solid var(â€“border);
background: var(â€“card);
font-family: â€˜Space Groteskâ€™, sans-serif;
font-size: 0.78rem;
font-weight: 600;
letter-spacing: 0.04em;
text-transform: uppercase;
cursor: pointer;
transition: all 0.18s;
color: var(â€“muted);
}

.type-btn.active-expense { background: var(â€“accent); border-color: var(â€“accent); color: #fff; }
.type-btn.active-income  { background: var(â€“green);  border-color: var(â€“green);  color: #fff; }

.form-grid {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 0.9rem;
}

.form-group { display: flex; flex-direction: column; gap: 0.35rem; }
.form-group.full { grid-column: 1 / -1; }

label {
font-size: 0.63rem;
text-transform: uppercase;
letter-spacing: 0.11em;
color: var(â€“muted);
font-weight: 500;
}

input[type=text],
input[type=number],
input[type=date],
select,
textarea {
background: var(â€“card);
border: 1px solid var(â€“border);
border-radius: 9px;
color: var(â€“ink);
font-family: â€˜Space Groteskâ€™, sans-serif;
font-size: 0.87rem;
padding: 0.72rem 0.95rem;
outline: none;
transition: border-color 0.2s, background 0.2s;
width: 100%;
-webkit-appearance: none;
resize: none;
}

input:focus, select:focus, textarea:focus {
border-color: var(â€“accent);
background: #fff;
}

.add-btn {
width: 100%;
border: none;
border-radius: 9px;
font-family: â€˜Space Groteskâ€™, sans-serif;
font-size: 0.8rem;
font-weight: 600;
padding: 0.85rem;
cursor: pointer;
letter-spacing: 0.08em;
text-transform: uppercase;
margin-top: 1rem;
transition: opacity 0.2s, transform 0.1s;
}

.add-btn.btn-expense { background: var(â€“ink); color: #faf8f4; }
.add-btn.btn-expense:hover { background: var(â€“accent); }
.add-btn.btn-income  { background: var(â€“green); color: #fff; }
.add-btn.btn-income:hover  { opacity: 0.85; }
.add-btn:active { transform: scale(0.99); }

/* Controls */
.controls {
display: flex;
justify-content: space-between;
align-items: center;
flex-wrap: wrap;
gap: 0.8rem;
margin-bottom: 1rem;
animation: riseUp 0.6s 0.22s ease both;
}

.filter-row { display: flex; gap: 0.4rem; flex-wrap: wrap; }

.filter-btn {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: 99px;
color: var(â€“ink2);
font-family: â€˜Space Groteskâ€™, sans-serif;
font-size: 0.67rem;
font-weight: 500;
padding: 0.3rem 0.8rem;
cursor: pointer;
transition: all 0.16s;
text-transform: uppercase;
letter-spacing: 0.05em;
}

.filter-btn:hover { border-color: var(â€“accent); color: var(â€“accent); }
.filter-btn.active { background: var(â€“ink); border-color: var(â€“ink); color: #faf8f4; }

.sort-select {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: 8px;
color: var(â€“ink2);
font-family: â€˜Space Groteskâ€™, sans-serif;
font-size: 0.67rem;
font-weight: 500;
padding: 0.32rem 0.7rem;
cursor: pointer;
outline: none;
transition: border-color 0.2s;
width: auto;
}

.sort-select:focus { border-color: var(â€“accent); }

/* List */
.list-title {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 1.3rem;
font-weight: 400;
margin-bottom: 0.9rem;
animation: riseUp 0.6s 0.25s ease both;
}

.list-title em { font-style: italic; color: var(â€“accent); }

.transaction-list {
display: flex;
flex-direction: column;
gap: 0.6rem;
animation: riseUp 0.6s 0.27s ease both;
}

.tx-item {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: 13px;
padding: 0.9rem 1.2rem;
display: grid;
grid-template-columns: 42px 1fr auto auto;
align-items: center;
gap: 0.9rem;
transition: box-shadow 0.2s, transform 0.18s;
}

.tx-item:hover { box-shadow: var(â€“shadow); transform: translateX(3px); }

.tx-item.is-income { border-left: 3px solid var(â€“green); }
.tx-item.is-expense { border-left: 3px solid var(â€“accent); }

.tx-icon {
width: 42px; height: 42px;
border-radius: 11px;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.15rem;
flex-shrink: 0;
}

.tx-desc {
font-size: 0.88rem;
font-weight: 500;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

.tx-meta {
font-size: 0.63rem;
color: var(â€“muted);
margin-top: 0.18rem;
text-transform: uppercase;
letter-spacing: 0.05em;
}

.tx-amount {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 1.25rem;
font-weight: 600;
white-space: nowrap;
}

.tx-amount.income  { color: var(â€“green); }
.tx-amount.expense { color: var(â€“accent); }

.tx-delete {
background: none;
border: none;
color: var(â€“border);
cursor: pointer;
font-size: 0.82rem;
padding: 0.28rem;
border-radius: 6px;
transition: color 0.2s, background 0.2s;
line-height: 1;
}

.tx-delete:hover { color: var(â€“red); background: var(â€“red-light); }

/* Category icon backgrounds */
.cat-eten          { background: #fff4e3; }
.cat-transport     { background: #e3eef8; }
.cat-wonen         { background: #f0e8f8; }
.cat-gezondheid    { background: #e3f4ec; }
.cat-entertainment { background: #fde8e3; }
.cat-kleding       { background: #fce8f0; }
.cat-abonnement    { background: #e8f0e3; }
.cat-sporten       { background: #e3f8f4; }
.cat-overig        { background: #f0f0f0; }
.cat-salaris       { background: #e3f4ec; }
.cat-freelance     { background: #e8f4e3; }
.cat-gift          { background: #fce8f0; }
.cat-rente         { background: #e3ecf5; }
.cat-huur-inkomen  { background: #f0ece3; }
.cat-teruggave     { background: #f4f0e3; }
.cat-overig-ink    { background: #f0f0f0; }

/* Insights section */
.insights-grid {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 1rem;
margin-bottom: 1.5rem;
animation: riseUp 0.6s 0.1s ease both;
}

.insight-card {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: 14px;
padding: 1.3rem;
box-shadow: var(â€“shadow);
}

.insight-card h3 {
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 1.15rem;
margin-bottom: 1rem;
}

.insight-card h3 em { font-style: italic; color: var(â€“accent); }

.cat-breakdown {
display: flex;
flex-direction: column;
gap: 0.6rem;
}

.cat-row {
display: flex;
align-items: center;
gap: 0.7rem;
}

.cat-row-icon { font-size: 1rem; width: 22px; text-align: center; }
.cat-row-label { font-size: 0.75rem; color: var(â€“ink2); flex: 1; }
.cat-row-bar-wrap { width: 80px; height: 5px; background: var(â€“card); border-radius: 99px; overflow: hidden; }
.cat-row-bar { height: 100%; border-radius: 99px; background: var(â€“accent); transition: width 0.6s cubic-bezier(.16,1,.3,1); }
.cat-row-amt { font-size: 0.75rem; font-weight: 500; color: var(â€“ink); white-space: nowrap; width: 60px; text-align: right; }

.savings-rate {
text-align: center;
padding: 1rem 0;
}

.savings-circle {
width: 110px;
height: 110px;
margin: 0 auto 0.8rem;
position: relative;
}

.savings-circle svg { transform: rotate(-90deg); }

.savings-circle .circle-bg { fill: none; stroke: var(â€“card); stroke-width: 8; }
.savings-circle .circle-val { fill: none; stroke-width: 8; stroke-linecap: round; transition: stroke-dashoffset 0.8s cubic-bezier(.16,1,.3,1); }

.savings-pct {
position: absolute;
inset: 0;
display: flex;
align-items: center;
justify-content: center;
font-family: â€˜Cormorant Garamondâ€™, serif;
font-size: 1.6rem;
font-weight: 300;
}

.savings-label {
font-size: 0.65rem;
text-transform: uppercase;
letter-spacing: 0.1em;
color: var(â€“muted);
font-weight: 500;
}

.savings-sub {
font-size: 0.7rem;
color: var(â€“muted);
margin-top: 0.3rem;
}

/* Goals */
.goals-list {
display: flex;
flex-direction: column;
gap: 0.8rem;
animation: riseUp 0.6s 0.1s ease both;
}

.goal-item {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: 13px;
padding: 1.1rem 1.3rem;
box-shadow: var(â€“shadow);
}

.goal-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 0.7rem;
}

.goal-name { font-size: 0.9rem; font-weight: 500; }
.goal-amounts { font-size: 0.72rem; color: var(â€“muted); }

.goal-track {
background: var(â€“card);
border-radius: 99px;
height: 7px;
overflow: hidden;
}

.goal-fill {
height: 100%;
border-radius: 99px;
background: linear-gradient(90deg, var(â€“blue), #5d9fda);
transition: width 0.7s cubic-bezier(.16,1,.3,1);
}

.goal-fill.done { background: linear-gradient(90deg, var(â€“green), #5dba88); }

.goal-pct {
font-size: 0.62rem;
color: var(â€“muted);
margin-top: 0.35rem;
}

.goal-delete {
background: none;
border: none;
color: var(â€“border);
cursor: pointer;
font-size: 0.75rem;
transition: color 0.2s;
}

.goal-delete:hover { color: var(â€“red); }

/* Empty */
.empty-state {
text-align: center;
padding: 3.5rem 1rem;
color: var(â€“muted);
font-size: 0.78rem;
letter-spacing: 0.06em;
text-transform: uppercase;
}

.empty-state .icon { font-size: 2.8rem; display: block; margin-bottom: 0.8rem; opacity: 0.35; }

/* Toast */
.toast {
position: fixed;
bottom: 2rem;
right: 2rem;
background: var(â€“ink);
color: #faf8f4;
font-size: 0.78rem;
font-weight: 500;
padding: 0.65rem 1.2rem;
border-radius: 10px;
box-shadow: var(â€“shadow-lg);
opacity: 0;
transform: translateY(8px);
transition: all 0.25s;
pointer-events: none;
z-index: 999;
}

.toast.show { opacity: 1; transform: translateY(0); }

/* Mobile menu toggle */
.mobile-header { display: none; }

@keyframes riseUp {
from { opacity: 0; transform: translateY(16px); }
to   { opacity: 1; transform: translateY(0); }
}

@media (max-width: 700px) {
.layout { grid-template-columns: 1fr; }
.sidebar {
position: static;
height: auto;
flex-direction: row;
flex-wrap: wrap;
padding: 1rem 1.2rem;
gap: 0.5rem;
align-items: center;
justify-content: space-between;
}
.sidebar-logo { margin-bottom: 0; }
.sidebar-nav { flex-direction: row; gap: 0.3rem; margin-bottom: 0; }
.nav-label { display: none; }
.sidebar-balance { display: none; }
.made-by-sidebar { display: none; }
.main { padding: 1.5rem 1rem 4rem; }
.summary { grid-template-columns: 1fr 1fr; }
.form-grid { grid-template-columns: 1fr; }
.insights-grid { grid-template-columns: 1fr; }
.tx-item { grid-template-columns: 38px 1fr auto auto; gap: 0.6rem; }
}
</style>

</head>
<body>
<div class="top-stripe"></div>
<div class="layout">

  <!-- â”€â”€ SIDEBAR â”€â”€ -->

  <nav class="sidebar">
    <div class="sidebar-logo">
      <div class="logo-icon" style="background:none;padding:0;width:44px;height:44px;">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44" style="display:block">
    <defs>
      <linearGradient id="ls" x1="0" y1="0" x2="1" y2="0">
        <stop offset="0" stop-color="#c9602a"/>
        <stop offset="0.4" stop-color="#e8a060"/>
        <stop offset="0.65" stop-color="#2a7a4f"/>
        <stop offset="1" stop-color="#2a5b8a"/>
      </linearGradient>
    </defs>
    <rect width="44" height="44" rx="10" fill="#2e2825"/>
    <rect x="0" y="0" width="44" height="3" rx="2" fill="url(#ls)"/>
    <circle cx="22" cy="26" r="13" fill="none" stroke="#c9602a" stroke-width="1.5" opacity="0.6"/>
    <circle cx="22" cy="26" r="9.5" fill="none" stroke="#c9602a" stroke-width="0.8" opacity="0.25"/>
    <text x="22" y="31" font-family="Georgia,serif" font-size="10" font-weight="bold" fill="#c9602a" text-anchor="middle" letter-spacing="-0.5">RB</text>
    <text x="22" y="11" font-family="Georgia,serif" font-size="3.8" fill="#6b6560" text-anchor="middle" letter-spacing="1.8">FIN</text>
  </svg>
</div>
      <div class="logo-text">
        FinanciÃ«n
        <small>Rob Borghouts</small>
      </div>
    </div>

```
<div class="sidebar-nav">
  <div class="nav-label">Menu</div>
  <button class="nav-item active" onclick="showPage('dashboard')">
    <span class="nav-icon">ğŸ“Š</span> Dashboard
  </button>
  <button class="nav-item" onclick="showPage('transactions')">
    <span class="nav-icon">â†•ï¸</span> Transacties
  </button>
  <button class="nav-item" onclick="showPage('insights')">
    <span class="nav-icon">ğŸ“ˆ</span> Inzichten
  </button>
  <button class="nav-item" onclick="showPage('goals')">
    <span class="nav-icon">ğŸ¯</span> Doelen
  </button>
</div>

<div class="sidebar-balance">
  <div class="bal-label">Netto saldo (deze maand)</div>
  <div class="bal-amount" id="sb-balance">â‚¬ 0</div>
  <div class="bal-sub" id="sb-balance-sub">Inkomsten - Uitgaven</div>
</div>

<div class="made-by-sidebar">Made by <strong>Rob Borghouts</strong></div>
<button class="install-btn" id="install-btn" onclick="installApp()" style="display:none">
  ğŸ“² Installeer app
</button>
```

  </nav>

  <!-- â”€â”€ MAIN â”€â”€ -->

  <main class="main">

```
<!-- â”€â”€ DASHBOARD â”€â”€ -->
<section class="page-section active" id="page-dashboard">
  <div class="page-header">
    <h2>Goedemorgen, <em>Rob</em> ğŸ‘‹</h2>
    <div class="page-date" id="header-date"></div>
  </div>

  <div class="summary">
    <div class="summary-card sc-income">
      <div class="sc-label">Inkomsten (maand)</div>
      <div class="sc-num" id="sc-income">â‚¬ 0</div>
      <div class="sc-sub" id="sc-income-sub">0 transacties</div>
    </div>
    <div class="summary-card sc-expense">
      <div class="sc-label">Uitgaven (maand)</div>
      <div class="sc-num" id="sc-expense">â‚¬ 0</div>
      <div class="sc-sub" id="sc-expense-sub">0 transacties</div>
    </div>
    <div class="summary-card sc-balance">
      <div class="sc-label">Netto saldo</div>
      <div class="sc-num" id="sc-balance">â‚¬ 0</div>
      <div class="sc-sub">inkomen âˆ’ uitgaven</div>
    </div>
    <div class="summary-card sc-avg">
      <div class="sc-label">Gem. uitgave/dag</div>
      <div class="sc-num" id="sc-avg">â‚¬ 0</div>
      <div class="sc-sub">gebaseerd op deze maand</div>
    </div>
  </div>

  <div class="budget-card">
    <div class="budget-header">
      <div class="b-label">Maandbudget (uitgaven)</div>
      <div class="b-right">
        â‚¬ <input class="b-input" type="number" id="budget-input" placeholder="2000" min="0" step="50" oninput="updateBudget()" />
      </div>
    </div>
    <div class="budget-track">
      <div class="budget-fill" id="budget-fill" style="width:0%"></div>
    </div>
    <div class="budget-labels">
      <span id="budget-spent">â‚¬ 0,00 uitgegeven</span>
      <span id="budget-left">Stel budget in â†’</span>
    </div>
  </div>

  <div class="chart-card">
    <div class="chart-title">Inkomsten <em>vs</em> Uitgaven â€” 6 maanden</div>
    <div class="chart-bars" id="chart-bars"></div>
    <div class="chart-legend">
      <span><span class="legend-dot" style="background:var(--green)"></span>Inkomsten</span>
      <span><span class="legend-dot" style="background:var(--accent)"></span>Uitgaven</span>
    </div>
  </div>

  <div class="tip-box">
    <span style="font-size:1rem;flex-shrink:0;margin-top:1px">ğŸ’¡</span>
    <div id="tip-text"></div>
  </div>

  <!-- Add transaction form -->
  <div class="form-card">
    <div class="form-title">Nieuwe <em>transactie</em></div>
    <div class="type-toggle">
      <button class="type-btn active-expense" id="btn-expense" onclick="setType('expense')">âˆ’ Uitgave</button>
      <button class="type-btn" id="btn-income"  onclick="setType('income')">+ Inkomst</button>
    </div>
    <div class="form-grid">
      <div class="form-group full">
        <label>Omschrijving</label>
        <input type="text" id="desc" placeholder="Bijv. Salaris aprilâ€¦" />
      </div>
      <div class="form-group">
        <label>Bedrag (â‚¬)</label>
        <input type="number" id="amount" placeholder="0,00" step="0.01" min="0" />
      </div>
      <div class="form-group">
        <label>Categorie</label>
        <select id="category"></select>
      </div>
      <div class="form-group">
        <label>Datum</label>
        <input type="date" id="date" />
      </div>
      <div class="form-group full">
        <label>Notitie (optioneel)</label>
        <input type="text" id="note" placeholder="Extra toelichtingâ€¦" />
      </div>
    </div>
    <button class="add-btn btn-expense" id="add-btn" onclick="addTransaction()">ï¼‹ &nbsp;Transactie toevoegen</button>
  </div>

  <!-- Recent -->
  <div class="list-title">Recente <em>transacties</em></div>
  <div class="transaction-list" id="recent-list"></div>
</section>

<!-- â”€â”€ TRANSACTIES â”€â”€ -->
<section class="page-section" id="page-transactions">
  <div class="page-header">
    <h2>Alle <em>Transacties</em></h2>
    <div class="page-date">Volledig overzicht van inkomsten & uitgaven</div>
  </div>

  <div class="controls">
    <div class="filter-row" id="filter-row"></div>
    <select class="sort-select" id="sort-select" onchange="renderTransactions()">
      <option value="date-desc">Nieuwste eerst</option>
      <option value="date-asc">Oudste eerst</option>
      <option value="amount-desc">Hoogste bedrag</option>
      <option value="amount-asc">Laagste bedrag</option>
    </select>
  </div>

  <div class="transaction-list" id="all-list"></div>
</section>

<!-- â”€â”€ INZICHTEN â”€â”€ -->
<section class="page-section" id="page-insights">
  <div class="page-header">
    <h2>FinanciÃ«le <em>Inzichten</em></h2>
    <div class="page-date">Analyse van jouw geldstromen</div>
  </div>

  <div class="insights-grid">
    <div class="insight-card">
      <h3>Top uitgaven<em> categorieÃ«n</em></h3>
      <div class="cat-breakdown" id="cat-breakdown"></div>
    </div>
    <div class="insight-card" style="display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;">
      <h3 style="width:100%">Spaar<em>quote</em></h3>
      <div class="savings-circle">
        <svg viewBox="0 0 100 100" width="110" height="110">
          <circle class="circle-bg" cx="50" cy="50" r="40"/>
          <circle class="circle-val" id="circle-val" cx="50" cy="50" r="40" stroke-dasharray="251.2" stroke-dashoffset="251.2"/>
        </svg>
        <div class="savings-pct" id="savings-pct">0%</div>
      </div>
      <div class="savings-label">van inkomsten gespaard</div>
      <div class="savings-sub" id="savings-sub">Voeg inkomsten toe om te berekenen</div>
    </div>
  </div>

  <div class="chart-card" style="animation: riseUp 0.6s 0.15s ease both">
    <div class="chart-title">Inkomsten <em>vs</em> Uitgaven â€” 6 maanden</div>
    <div class="chart-bars" id="chart-bars-2"></div>
    <div class="chart-legend">
      <span><span class="legend-dot" style="background:var(--green)"></span>Inkomsten</span>
      <span><span class="legend-dot" style="background:var(--accent)"></span>Uitgaven</span>
    </div>
  </div>
</section>

<!-- â”€â”€ DOELEN â”€â”€ -->
<section class="page-section" id="page-goals">
  <div class="page-header">
    <h2>Spaar<em>doelen</em></h2>
    <div class="page-date">Werk toe naar jouw financiÃ«le doelen</div>
  </div>

  <!-- Goal form -->
  <div class="form-card" style="animation: riseUp 0.6s ease both">
    <div class="form-title">Nieuw <em>spaardoel</em></div>
    <div class="form-grid">
      <div class="form-group full">
        <label>Naam van het doel</label>
        <input type="text" id="goal-name" placeholder="Bijv. Vakantie ItaliÃ« ğŸ‡®ğŸ‡¹" />
      </div>
      <div class="form-group">
        <label>Doelbedrag (â‚¬)</label>
        <input type="number" id="goal-target" placeholder="2500" min="0" step="50" />
      </div>
      <div class="form-group">
        <label>Al gespaard (â‚¬)</label>
        <input type="number" id="goal-saved" placeholder="0" min="0" step="10" />
      </div>
    </div>
    <button class="add-btn btn-expense" onclick="addGoal()">ğŸ¯ &nbsp;Doel toevoegen</button>
  </div>

  <div class="list-title">Mijn <em>doelen</em></div>
  <div class="goals-list" id="goals-list"></div>
</section>
```

  </main>
</div>

<div class="toast" id="toast"></div>

<script>
// â”€â”€ PWA INSTALL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let deferredPrompt = null;

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  document.getElementById('install-btn').style.display = 'block';
});

window.addEventListener('appinstalled', () => {
  document.getElementById('install-btn').style.display = 'none';
  toast('ğŸ‰ App geÃ¯nstalleerd op beginscherm!');
  deferredPrompt = null;
});

async function installApp() {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if (outcome === 'accepted') toast('ğŸ‰ App wordt geÃ¯nstalleerd!');
    deferredPrompt = null;
    document.getElementById('install-btn').style.display = 'none';
  } else {
    // iOS fallback
    toast('ğŸ“² Tik op Delen â†’ "Zet op beginscherm"');
  }
}

// iOS: always show install hint since beforeinstallprompt doesn't fire
const isIOS = /iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());
const isStandalone = window.navigator.standalone === true;
if (isIOS && !isStandalone) {
  document.getElementById('install-btn').style.display = 'block';
}

// â”€â”€ SERVICE WORKER (offline support) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if ('serviceWorker' in navigator) {
  const swCode = `
    const CACHE = 'rb-finance-v1';
    const ASSETS = [self.location.href];
    self.addEventListener('install', e => e.waitUntil(caches.open(CACHE).then(c => c.addAll(ASSETS))));
    self.addEventListener('fetch', e => e.respondWith(caches.match(e.request).then(r => r || fetch(e.request))));
  `;
  const blob = new Blob([swCode], { type: 'application/javascript' });
  const swUrl = URL.createObjectURL(blob);
  navigator.serviceWorker.register(swUrl).catch(() => {});
}
</script>

<script>
// â”€â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const EXPENSE_CATS = {
  eten:          { label:'Eten & drinken',  icon:'ğŸ”' },
  transport:     { label:'Transport',        icon:'ğŸš—' },
  wonen:         { label:'Wonen',            icon:'ğŸ ' },
  gezondheid:    { label:'Gezondheid',       icon:'ğŸ’Š' },
  entertainment: { label:'Entertainment',    icon:'ğŸ¬' },
  kleding:       { label:'Kleding',          icon:'ğŸ‘—' },
  abonnement:    { label:'Abonnementen',     icon:'ğŸ“±' },
  sporten:       { label:'Sporten',          icon:'ğŸƒ' },
  overig:        { label:'Overig',           icon:'ğŸ“¦' },
};

const INCOME_CATS = {
  salaris:       { label:'Salaris',          icon:'ğŸ’¼' },
  freelance:     { label:'Freelance',        icon:'ğŸ–¥ï¸' },
  gift:          { label:'Cadeau/gift',      icon:'ğŸ' },
  rente:         { label:'Rente/dividend',   icon:'ğŸ“ˆ' },
  'huur-inkomen':{ label:'Huurinkomsten',    icon:'ğŸ˜ï¸' },
  teruggave:     { label:'Teruggave',        icon:'â†©ï¸' },
  'overig-ink':  { label:'Overig',           icon:'ğŸ’°' },
};

const ALL_CATS = { ...EXPENSE_CATS, ...INCOME_CATS };

const TIPS = [
  "De <em>50/30/20 regel</em>: besteed 50% aan vaste lasten, 30% aan wensen en 20% aan sparen.",
  "Een dagelijkse koffie van â‚¬3,50 kost je <em>â‚¬1.277 per jaar</em>. Klein bedrag, groot effect.",
  "Bekijk maandelijks je abonnementen â€” gemiddeld lopen er <em>2â€“3 vergeten abonnementen</em>.",
  "Boodschappen zonder lijst kosten gemiddeld <em>23% meer</em>.",
  "De beste besparing zit vaak in <em>energie en verzekeringen</em>. Vergelijken loont!",
  "Betaal jezelf eerst: zet op de 1e van de maand direct een bedrag opzij.",
  "Een <em>spaardoel</em> instellen verhoogt de kans op sparen met 42%.",
];

let transactions = JSON.parse(localStorage.getItem('rb_tx_v3') || '[]');
let goals        = JSON.parse(localStorage.getItem('rb_goals_v3') || '[]');
let budget       = parseFloat(localStorage.getItem('rb_budget_v3') || '0');
let currentType  = 'expense';
let activeFilter = 'alles';
let activeFilterType = 'alles'; // alles / income / expense

// â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('date').value = new Date().toISOString().split('T')[0];
document.getElementById('budget-input').value = budget || '';
document.getElementById('header-date').textContent = new Date().toLocaleDateString('nl-NL',{weekday:'long',day:'numeric',month:'long',year:'numeric'});
document.getElementById('tip-text').innerHTML = TIPS[Math.floor(Math.random() * TIPS.length)];
buildCategorySelect();
buildFilters();
render();

// â”€â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function save() {
  localStorage.setItem('rb_tx_v3', JSON.stringify(transactions));
  localStorage.setItem('rb_goals_v3', JSON.stringify(goals));
  localStorage.setItem('rb_budget_v3', budget.toString());
}

function fmt(n) {
  return 'â‚¬\u00a0' + Math.abs(n).toFixed(2).replace('.',',').replace(/\B(?=(\d{3})+(?!\d))/g,'.');
}

function fmtDate(d) {
  return new Date(d+'T12:00:00').toLocaleDateString('nl-NL',{day:'numeric',month:'short',year:'numeric'});
}

function toast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  setTimeout(() => el.classList.remove('show'), 2400);
}

function getMonth(tx) {
  const now = new Date();
  const d = new Date(tx.date+'T12:00:00');
  return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
}

function monthTotals() {
  const inc = transactions.filter(t => t.type==='income' && getMonth(t)).reduce((s,t)=>s+t.amount,0);
  const exp = transactions.filter(t => t.type==='expense' && getMonth(t)).reduce((s,t)=>s+t.amount,0);
  return { inc, exp };
}

// â”€â”€â”€ PAGE NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showPage(page) {
  document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
  document.getElementById('page-'+page).classList.add('active');
  document.querySelector(`.nav-item[onclick="showPage('${page}')"]`).classList.add('active');
  render();
}

// â”€â”€â”€ FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setType(type) {
  currentType = type;
  document.getElementById('btn-expense').className = 'type-btn' + (type==='expense' ? ' active-expense' : '');
  document.getElementById('btn-income').className  = 'type-btn' + (type==='income'  ? ' active-income'  : '');
  document.getElementById('add-btn').className = 'add-btn ' + (type==='expense' ? 'btn-expense' : 'btn-income');
  buildCategorySelect();
}

function buildCategorySelect() {
  const sel = document.getElementById('category');
  const cats = currentType === 'expense' ? EXPENSE_CATS : INCOME_CATS;
  sel.innerHTML = Object.entries(cats).map(([k,v]) =>
    `<option value="${k}">${v.icon} ${v.label}</option>`
  ).join('');
}

function addTransaction() {
  const desc   = document.getElementById('desc').value.trim();
  const amount = parseFloat(document.getElementById('amount').value);
  const cat    = document.getElementById('category').value;
  const date   = document.getElementById('date').value;
  const note   = document.getElementById('note').value.trim();

  if (!desc || isNaN(amount) || amount <= 0 || !date) {
    toast('âš ï¸ Vul omschrijving, bedrag en datum in.');
    return;
  }

  transactions.unshift({ id: Date.now(), type: currentType, desc, amount, category: cat, date, note });
  save(); render();
  toast(currentType === 'expense' ? 'âœ“ Uitgave toegevoegd!' : 'âœ“ Inkomst toegevoegd!');

  document.getElementById('desc').value = '';
  document.getElementById('amount').value = '';
  document.getElementById('note').value = '';
  document.getElementById('date').value = new Date().toISOString().split('T')[0];
}

// â”€â”€â”€ BUDGET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateBudget() {
  budget = parseFloat(document.getElementById('budget-input').value) || 0;
  save(); renderBudget();
}

function renderBudget() {
  const { exp } = monthTotals();
  const fill  = document.getElementById('budget-fill');
  const spent = document.getElementById('budget-spent');
  const left  = document.getElementById('budget-left');

  spent.textContent = fmt(exp) + ' uitgegeven';
  if (!budget) { fill.style.width='0%'; left.textContent='Stel budget in â†’'; fill.className='budget-fill'; return; }

  const pct = Math.min((exp/budget)*100, 100);
  fill.style.width = pct+'%';
  fill.className = 'budget-fill'+(pct>=100?' over':pct>=75?' warn':'');
  const rem = budget - exp;
  left.textContent = rem <= 0 ? 'ğŸ”´ '+fmt(rem)+' over budget' : fmt(rem)+' resterend';
}

// â”€â”€â”€ CHART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderChart(containerId) {
  const now = new Date();
  const months = [];
  for (let i=5;i>=0;i--) {
    const d = new Date(now.getFullYear(), now.getMonth()-i, 1);
    months.push({ m:d.getMonth(), y:d.getFullYear(), lbl:d.toLocaleDateString('nl-NL',{month:'short'}) });
  }

  const incTotals = months.map(mo => transactions.filter(t=>t.type==='income'&&new Date(t.date+'T12:00:00').getMonth()===mo.m&&new Date(t.date+'T12:00:00').getFullYear()===mo.y).reduce((s,t)=>s+t.amount,0));
  const expTotals = months.map(mo => transactions.filter(t=>t.type==='expense'&&new Date(t.date+'T12:00:00').getMonth()===mo.m&&new Date(t.date+'T12:00:00').getFullYear()===mo.y).reduce((s,t)=>s+t.amount,0));
  const maxVal = Math.max(...incTotals, ...expTotals, 1);

  document.getElementById(containerId).innerHTML = months.map((mo,i) => `
    <div class="chart-col">
      <div class="chart-bar-pair">
        <div class="bar inc" style="height:${Math.max((incTotals[i]/maxVal)*90,3)}px" title="Inkomsten ${fmt(incTotals[i])}"></div>
        <div class="bar exp" style="height:${Math.max((expTotals[i]/maxVal)*90,3)}px" title="Uitgaven ${fmt(expTotals[i])}"></div>
      </div>
      <div class="chart-lbl">${mo.lbl}</div>
    </div>
  `).join('');
}

// â”€â”€â”€ FILTERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildFilters() {
  const filterCats = ['alles', 'income', 'expense', ...Object.keys(EXPENSE_CATS), ...Object.keys(INCOME_CATS)];
  document.getElementById('filter-row').innerHTML = [
    {k:'alles',  lbl:'Alles'},
    {k:'income', lbl:'ğŸ’š Inkomsten'},
    {k:'expense',lbl:'ğŸ”´ Uitgaven'},
    ...Object.entries(EXPENSE_CATS).map(([k,v])=>({k,lbl:v.icon+' '+v.label})),
    ...Object.entries(INCOME_CATS).map(([k,v])=>({k,lbl:v.icon+' '+v.label})),
  ].map(f=>`<button class="filter-btn ${f.k===activeFilter?'active':''}" onclick="setFilter('${f.k}',this)">${f.lbl}</button>`).join('');
}

function setFilter(cat, btn) {
  activeFilter = cat;
  buildFilters();
  renderTransactions();
}

// â”€â”€â”€ TRANSACTION LIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderTransactions() {
  let list = [...transactions];

  if (activeFilter === 'income')  list = list.filter(t=>t.type==='income');
  else if (activeFilter === 'expense') list = list.filter(t=>t.type==='expense');
  else if (activeFilter !== 'alles') list = list.filter(t=>t.category===activeFilter);

  const sort = document.getElementById('sort-select').value;
  if      (sort==='date-desc')   list.sort((a,b)=>b.date.localeCompare(a.date)||b.id-a.id);
  else if (sort==='date-asc')    list.sort((a,b)=>a.date.localeCompare(b.date)||a.id-b.id);
  else if (sort==='amount-desc') list.sort((a,b)=>b.amount-a.amount);
  else if (sort==='amount-asc')  list.sort((a,b)=>a.amount-b.amount);

  renderList('all-list', list, true);
}

function txHTML(t, idx, showAll=false) {
  const cat = ALL_CATS[t.category] || { icon:'ğŸ“¦', label:'Overig' };
  const sign = t.type === 'income' ? '+' : 'âˆ’';
  return `
    <div class="tx-item is-${t.type}" style="animation-delay:${idx*0.025}s">
      <div class="tx-icon cat-${t.category}">${cat.icon}</div>
      <div>
        <div class="tx-desc">${t.desc}</div>
        <div class="tx-meta">${t.type==='income'?'Inkomst':'Uitgave'} Â· ${cat.label} Â· ${fmtDate(t.date)}${t.note?' Â· '+t.note:''}</div>
      </div>
      <div class="tx-amount ${t.type}">${sign} ${fmt(t.amount)}</div>
      <button class="tx-delete" onclick="deleteTransaction(${t.id})" title="Verwijderen">âœ•</button>
    </div>`;
}

function renderList(id, list, paginated=false) {
  const el = document.getElementById(id);
  if (!list.length) {
    el.innerHTML = `<div class="empty-state"><span class="icon">ğŸ“­</span>Geen transacties gevonden</div>`;
    return;
  }
  el.innerHTML = (paginated ? list : list.slice(0,8)).map((t,i)=>txHTML(t,i)).join('');
}

function deleteTransaction(id) {
  transactions = transactions.filter(t=>t.id!==id);
  save(); render(); toast('ğŸ—‘ Verwijderd.');
}

// â”€â”€â”€ INSIGHTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderInsights() {
  // Category breakdown
  const byCat = {};
  transactions.filter(t=>t.type==='expense'&&getMonth(t)).forEach(t => {
    byCat[t.category] = (byCat[t.category]||0) + t.amount;
  });

  const sorted = Object.entries(byCat).sort((a,b)=>b[1]-a[1]).slice(0,6);
  const max = sorted[0]?.[1] || 1;
  const catEl = document.getElementById('cat-breakdown');

  if (!sorted.length) {
    catEl.innerHTML = '<div style="color:var(--muted);font-size:0.75rem;text-align:center;padding:1rem">Nog geen uitgaven deze maand</div>';
  } else {
    catEl.innerHTML = sorted.map(([k,v]) => {
      const cat = EXPENSE_CATS[k] || {icon:'ğŸ“¦',label:'Overig'};
      return `<div class="cat-row">
        <div class="cat-row-icon">${cat.icon}</div>
        <div class="cat-row-label">${cat.label}</div>
        <div class="cat-row-bar-wrap"><div class="cat-row-bar" style="width:${(v/max)*100}%"></div></div>
        <div class="cat-row-amt">${fmt(v)}</div>
      </div>`;
    }).join('');
  }

  // Savings rate
  const { inc, exp } = monthTotals();
  const saved = inc - exp;
  const rate  = inc > 0 ? Math.max(0, Math.min(saved/inc, 1)) : 0;
  const circ  = 251.2;
  document.getElementById('savings-pct').textContent = Math.round(rate*100)+'%';
  document.getElementById('circle-val').style.strokeDashoffset = circ - rate*circ;
  document.getElementById('circle-val').style.stroke = rate >= 0.2 ? 'var(--green)' : rate > 0 ? '#e8a060' : 'var(--red)';
  document.getElementById('savings-sub').textContent = inc > 0
    ? `${fmt(saved)} gespaard van ${fmt(inc)} inkomsten`
    : 'Voeg inkomsten toe om te berekenen';
}

// â”€â”€â”€ GOALS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function addGoal() {
  const name   = document.getElementById('goal-name').value.trim();
  const target = parseFloat(document.getElementById('goal-target').value);
  const saved  = parseFloat(document.getElementById('goal-saved').value) || 0;

  if (!name || isNaN(target) || target <= 0) {
    toast('âš ï¸ Vul naam en doelbedrag in.');
    return;
  }

  goals.push({ id: Date.now(), name, target, saved });
  save(); renderGoals();
  toast('ğŸ¯ Doel toegevoegd!');
  document.getElementById('goal-name').value = '';
  document.getElementById('goal-target').value = '';
  document.getElementById('goal-saved').value = '';
}

function deleteGoal(id) {
  goals = goals.filter(g=>g.id!==id);
  save(); renderGoals(); toast('ğŸ—‘ Doel verwijderd.');
}

function updateGoalSaved(id, val) {
  const g = goals.find(g=>g.id===id);
  if (g) { g.saved = Math.max(0, parseFloat(val)||0); save(); renderGoals(); }
}

function renderGoals() {
  const el = document.getElementById('goals-list');
  if (!goals.length) {
    el.innerHTML = `<div class="empty-state"><span class="icon">ğŸ¯</span>Nog geen doelen ingesteld</div>`;
    return;
  }

  el.innerHTML = goals.map(g => {
    const pct = Math.min((g.saved/g.target)*100, 100);
    const done = pct >= 100;
    return `<div class="goal-item">
      <div class="goal-header">
        <div>
          <div class="goal-name">${done?'âœ… ':''}${g.name}</div>
          <div class="goal-amounts">${fmt(g.saved)} van ${fmt(g.target)}</div>
        </div>
        <button class="goal-delete" onclick="deleteGoal(${g.id})">âœ•</button>
      </div>
      <div class="goal-track">
        <div class="goal-fill${done?' done':''}" style="width:${pct}%"></div>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:0.5rem">
        <div class="goal-pct">${Math.round(pct)}% bereikt</div>
        <div style="display:flex;align-items:center;gap:0.4rem;font-size:0.7rem;color:var(--muted)">
          Gespaard: â‚¬ <input type="number" value="${g.saved}" min="0" step="10" onchange="updateGoalSaved(${g.id},this.value)"
            style="width:75px;background:var(--card);border:1px solid var(--border);border-radius:6px;padding:0.2rem 0.4rem;font-family:'Space Grotesk',sans-serif;font-size:0.75rem;color:var(--ink);outline:none;" />
        </div>
      </div>
    </div>`;
  }).join('');
}

// â”€â”€â”€ SIDEBAR BALANCE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderSidebarBalance() {
  const { inc, exp } = monthTotals();
  const bal = inc - exp;
  const el = document.getElementById('sb-balance');
  el.textContent = (bal < 0 ? 'âˆ’ ' : '') + fmt(bal);
  el.className = 'bal-amount' + (bal > 0 ? ' positive' : bal < 0 ? ' negative' : '');
  document.getElementById('sb-balance-sub').textContent = `${fmt(inc)} inkomen Â· ${fmt(exp)} uitgaven`;
}

// â”€â”€â”€ SUMMARY CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderSummary() {
  const now = new Date();
  const { inc, exp } = monthTotals();
  const bal = inc - exp;
  const mExp = transactions.filter(t=>t.type==='expense'&&getMonth(t));
  const mInc = transactions.filter(t=>t.type==='income'&&getMonth(t));
  const avg  = exp / (now.getDate()||1);

  document.getElementById('sc-income').textContent      = fmt(inc);
  document.getElementById('sc-expense').textContent     = fmt(exp);
  document.getElementById('sc-balance').textContent     = (bal<0?'âˆ’ ':'')+fmt(bal);
  document.getElementById('sc-avg').textContent         = fmt(avg);
  document.getElementById('sc-income-sub').textContent  = mInc.length+' transacties';
  document.getElementById('sc-expense-sub').textContent = mExp.length+' transacties';

  const balEl = document.getElementById('sc-balance');
  balEl.className = 'sc-num' + (bal < 0 ? ' negative' : '');
}

// â”€â”€â”€ MAIN RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function render() {
  renderSummary();
  renderBudget();
  renderChart('chart-bars');
  renderChart('chart-bars-2');
  renderList('recent-list', transactions.slice(0,6));
  buildFilters();
  renderTransactions();
  renderInsights();
  renderGoals();
  renderSidebarBalance();
}
</script>

</body>
</html>